<!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Patient Maps Demo</title>

        {% load staticfiles %}
        <!--style sheets--> 
        <link rel="stylesheet" type="text/css" href="{% static 'tracks/themes/gray/easyui.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'tracks/themes/icon.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'tracks/demo.css' %}">
        <!--style sheets--> 

        <script type="text/javascript" src="{% static 'tracks/jquery/jquery.min.js' %}"></script>
        <script type="text/javascript" src="{% static 'tracks/jquery/jquery.easyui.min.js' %}"></script>
        <script type="text/javascript" src="{% static 'tracks/d3/d3.v3.min.js' %}"></script>
        <script type="text/javascript" src="{% static 'tracks/src/patient_tracker.js' %}"></script>

        <link href="http://cdnjs.cloudflare.com/ajax/libs/qtip2/2.2.0/jquery.qtip.css" type="text/css" rel="stylesheet" />
        <script src="http://cdn.jsdelivr.net/qtip2/2.2.0/jquery.qtip.js"></script>
        
        <!-- --> 
        <script type="text/javascript">
        $(function() {
            $("#tfq2b").click(function() {
                if ($("#tfq2b").val() == "Quick search"){
                    $("#tfq2b").val(""); 
                }
            });
        });
        </script>

        <!--patient_tracker.js --> 
		<script type="text/javascript">
    		$(document).ready(function(){

				var params = {};
        		$.post("{% static 'tracks/tmp/dataset_1540879.json' %}", 
            		params,
            		function(data){                
                		var timeData = prepareTimeLineData.prepare(data);
                		if (timeData.length===0) return;

                		var width = 650;
                		var timeline = clinicalTimeline().itemHeight(12).width(width).colorProperty('color').opacityProperty('opacity').stack();
                		var svg = d3.select("#timeline_container").append("svg").attr("width", width).datum(timeData).call(timeline);
                		$("#pt_overview_panel").show();
            		}
            		,"json"
        		);
			});
        </script>

    </head>

    <body>
    
    <!--PatientTracker header--> 
    <!--
    <div id="pt-header" style="height:25px;background-color: #eee">
        <span class="appName">PatientTracker</span>

		<form id="tfnewsearch" method="get" action="">
            <input type="text" id="tfq2b" class="tftextinput" name="q" size="20" maxlength="60" placeholder="Quick search">
            <input type="submit" value="&nbsp;" class="tfbutton">
        </form>
        <div class="tfclear"></div>

        <link rel="stylesheet" type="text/css" href="{% static 'tracks/themes/bootstrap.min.css' %}">
        <script type="text/javascript" src="{% static 'tracks/styles/jscollections/bootstrap.min.js' %}"></script>
		<div class="col-md-4">
  			<input class="form-control" type="search" size="20" maxlength="40" placeholder="Quick search"/>
  			<span class="glyphicon glyphicon-search"></span>
		</div>

    </div>
	--> 
    <!--PatientTracker header--> 

    <div class="easyui-layout" style="height:550px;">
        <!--header-->
		<div data-options="region:'north'" style="height:30px;background-color: #eee">
        	<span class="appName">PatientTracker</span>
		</div>
        <!--header-->

        <!--footer-->
        <div data-options="region:'south'" style="height:25px;background-color: #eee">
			<span class="version_info">version 0.0.1</span>
		</div>
        <!--footer-->

        <div data-options="region:'east',split:true" title="Description" style="width:250px;"></div>

        <!--configuration panel-->
        <div data-options="region:'west',split:true" title="Configuration" style="width:200px;">
            <div class="easyui-accordion" data-options="fit:true,border:false">
            <div title="Diagnostics" style="padding:10px;">
                <input type="checkbox"> Lab test <br>
                <input type="checkbox"> Other 
            </div>
            <div title="Treatment" data-options="selected:true" style="padding:10px;">
                <input type="checkbox">  Medication <br>
                <input type="checkbox">  Other
            </div>
            <div title="Status" style="padding:10px">
              sub track content
            </div>
            </div>
        </div>
        <!--configuration panel-->

        <!--display/overview panel-->
        <div id="pt_overview_panel" data-options="region:'center',title:'Overview'">
            <div id="timeline_container" class="easyui-layout" data-options="fit:true">
                <!--TODO the hight should be fixed-->
                <!--<div id="pt_overview_panel" data-options="region:'north',split:true,border:false" style="height:75px">
					<script type="text/javascript">
						d3.select("").append("p").text("New region definition!");
					</script>
				</div>-->
            </div>
        </div>
        <!--display/overview panel-->

    </div>
    </body>
</html>
