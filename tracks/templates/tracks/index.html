<!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Patient Tracks Demo</title>

        {% load staticfiles %}
        <!--style sheets--> 
        <link rel="stylesheet" type="text/css" href="{% static 'tracks/themes/gray/easyui.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'tracks/themes/icon.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'tracks/demo.css' %}">
        <!--style sheets--> 

        <script type="text/javascript" src="{% static 'tracks/jquery/jquery.min.js' %}"></script>
        <script type="text/javascript" src="{% static 'tracks/jquery/jquery.easyui.min.js' %}"></script>
        <script type="text/javascript" src="{% static 'tracks/d3/d3.v3.min.js' %}"></script>
        <script type="text/javascript" src="{% static 'tracks/src/patient_tracker.js' %}"></script>

        <link href="http://cdnjs.cloudflare.com/ajax/libs/qtip2/2.2.0/jquery.qtip.css" type="text/css" rel="stylesheet" />
        <script src="http://cdn.jsdelivr.net/qtip2/2.2.0/jquery.qtip.js"></script>
        
        <!-- 
        <script type="text/javascript">
        $(function() {
            $("#tfq2b").click(function() {
                if ($("#tfq2b").val() == "Quick search"){
                    $("#tfq2b").val(""); 
                }
            });
        });
        </script>
		-->

		<style type="text/css">
			.axis path,
			.axis line {
			  fill: none;
			  stroke: black;
			  shape-rendering: crispEdges;
			}

			.axis text {
			  font-family: sans-serif;
			  font-size: 10px;
			}

			.timeline-label {
			  font-family: sans-serif;
			  font-size: 12px;
			}
			
			#timeline_container .axis {
			  transform: translate(0px,20px);
			  -ms-transform: translate(0px,20px); /* IE 9 */
			  -webkit-transform: translate(0px,20px); /* Safari and Chrome */
			  -o-transform: translate(0px,20px); /* Opera */
			  -moz-transform: translate(0px,20px); /* Firefox */
			}

			.coloredDiv {
			  height:20px; width:20px; float:left;
			}
			
			.qtip-wide {
				max-width: 600px;
			}
		</style>
 
        <!--patient_tracker.js --> 
		<script type="text/javascript">
    		$(document).ready(function(){

				var params = {};
        		$.post("{% static 'tracks/tmp/dataset_887695.json' %}", 
            		params,
            		function(data){                
                		var timeData = prepareTimeLineData.prepare(data);
                		if (timeData.length===0) return;

                        //This width has to be set automatically
                		var width = 1600;
                		var timeline = patientTimeline().itemHeight(12).width(width).colorProperty('color').opacityProperty('opacity').stack();
                		var svg = d3.select("#timeline_container").append("svg").attr("width", width).datum(timeData).call(timeline);
                		$("#pt_display_panel").show();
            		}
            		,"json"
        		);
			});
        </script>

    </head>

    <body class="easyui-layout">
    
        <!--PatientTracker header--> 
        <!--
            <form id="tfnewsearch" method="get" action="">
                <input type="text" id="tfq2b" class="tftextinput" name="q" size="20" maxlength="60" placeholder="Quick search">
                <input type="submit" value="&nbsp;" class="tfbutton">
            </form>
        --> 
        <!--PatientTracker header--> 

        <!--header TODO: search box-->
		<div data-options="region:'north'" style="height:30px;background-color: #eee">
        	<span class="appName">Patient Visualizer</span>
            <div align="right">
                <input class="easyui-searchbox" data-options="prompt:'Quick Search: Patient ID',searcher:doSearch" style="width:250px"></input>
                <!-- TODO searchbox with correct form submission to fetch the correct patient record--> 
                <script>
                    function doSearch(value){
                        alert('You input: ' + value);
                    }
                </script>
            </div>
		</div>
        <!--header-->

        <!--footer-->
        <div data-options="region:'south'" style="height:25px;background-color: #eee">
			<span class="version_info">version 0.0.1</span>
		</div>
        <!--footer-->

        <!--description panel-->
        <div data-options="region:'east',split:true" title="Description" style="width:250px;">
            <table style="width:100%" border="0" text-align="left">
                <tr></tr>
                <tr>
                    <td>GUID</td>
                    <td>4000107106068001</td>
                </tr>
            </table>
        </div>
        <!--description panel-->

        <!--configuration panel-->
        <div data-options="region:'west',split:true" title="Configuration" style="width:200px;">
            <div class="easyui-accordion" data-options="fit:true,border:false">
            <div title="Electronic Medical Record" style="padding:10px;">
              <input type="checkbox" checked>NUR Nursing Notes</br>
              <input type="checkbox" checked>PTH Pathology Notes</br> 
              <input type="checkbox" checked>OCC Outside Correspondence</br> 
              <input type="checkbox" checked>RES Consent/IRB</br> 
              <input type="checkbox" checked>UCC Urgent Care Physician Notes</br> 
            </div>
            <div title="Diagnostics" style="padding:10px;">
                <input type="checkbox">Mammogram, Unilateral</br>
                <input type="checkbox">Other </br> 
            </div>
            <div title="Treatments" id="treatment_tag" data-options="selected:true" style="padding:10px;">
                <input id="trtrack1" type="checkbox">Breast Medicine Visit</br> 
                <input type="checkbox">Comprehensive Metabolic Panel</br> 
                <input type="checkbox">CBC with Automated Diff</br> 
                <input type="checkbox">Bone Imaging, Whole Body</br> 
                <input type="checkbox">Other</br> 
            </div>
                <div title="Status" style="padding:10px">
                  sub track content
                </div>
            </div>
        </div>
        <!--configuration panel-->

        <!--display/overview panel-->
        <div id="pt_display_panel" data-options="region:'center',title:'Overview'">
            <div id="timeline_display_panel" class="easyui-layout" data-options="fit:true">
                <!--The region panel-->
                <div id="timeline_overview_display" data-options="region:'north',split:true,border:false" style="height:100px"></div>
                <!--The region panel-->

                <!--The display panel-->
                <div id="timeline_container" data-options="region:'center',border:false"></div>
                <!--The display panel-->
            </div>
        </div>
        <!--display/overview panel-->

    </body>
</html>
